<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•© ì£¼ë¬¸/ê²°ì œ í˜ì´ì§€</title>

    <link rel="stylesheet" href="order-ux.css">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="https://js.tosspayments.com/v2/standard"></script>

    <style>
        .modal {
            position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto;
            background-color: rgba(0,0,0,0.4); display: none;
        }
        .modal-content {
            background-color: #fefefe; margin: 10% auto; padding: 20px;
            border: 1px solid #888; width: 80%; max-width: 900px;
            border-radius: 8px; position: relative;
        }
        .options-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;
        }
        .wrap-card {
            border: 2px solid transparent; cursor: pointer; text-align: center;
            padding: 10px; border-radius: 6px; transition: all 0.3s;
        }
        .wrap-card:hover { border-color: #ccc; }
        .wrap-card.selected { border-color: #4A7C59; background-color: #f0f8f0; }
        .wrap-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; }
        .close-button { float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>í†µí•© ì£¼ë¬¸ ë° ê²°ì œ</h1>
    </header>

    <main class="order-layout">

        <div class="main-form-area">

            <form id="orderForm" onsubmit="return false;">
                <section class="order-section products-option-section">
                    <h2>ğŸ›’ ì£¼ë¬¸ ìƒí’ˆ ë° ì˜µì…˜ í™•ì¸</h2>
                    <div id="selectedProductList">
                    </div>
                </section>

                <section class="order-section delivery-info-section">
                    <h2>ğŸ  ë°°ì†¡ì§€ ë° í¬ë§ì¼ ì •ë³´</h2>
                    <div class="form-group"><label for="recipient">ìˆ˜ë ¹ì¸</label><input type="text" id="recipient" name="recipient" required placeholder="ìˆ˜ë ¹ì¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></div>
                    <div class="form-group"><label for="recipientPhonenumber">ì—°ë½ì²˜</label><input type="tel" id="recipientPhonenumber" name="recipientPhonenumber" required placeholder="01012345678 (ìˆ«ìë§Œ)"></div>
                    <div class="form-group">
                        <label for="deliveryAddress">ë°°ì†¡ ì£¼ì†Œ</label>
                        <div class="address-inputs">
                            <input type="text" id="deliveryAddress" name="deliveryAddress" required placeholder="ê¸°ë³¸ ì£¼ì†Œ (ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬)">
                            <button type="button" class="btn-search-address btn-secondary">ì£¼ì†Œ ê²€ìƒ‰</button>
                        </div>
                        <input type="text" id="deliveryAddressDetail" name="deliveryAddressDetail" placeholder="ìƒì„¸ ì£¼ì†Œ (ì˜ˆ: 101í˜¸)">
                    </div>
                    <div class="form-group">
                        <label for="deliveryMessage">ë°°ì†¡ ë©”ì‹œì§€</label>
                        <select id="deliveryMessage" name="deliveryMessage">
                            <option value="">-- ë°°ì†¡ ë©”ì‹œì§€ ì„ íƒ --</option>
                            <option value="ë¬¸ ì•ì— ë†“ì•„ì£¼ì„¸ìš”">ë¬¸ ì•ì— ë†“ì•„ì£¼ì„¸ìš”</option>
                            <option value="ê²½ë¹„ì‹¤ì— ë§¡ê²¨ì£¼ì„¸ìš”">ê²½ë¹„ì‹¤ì— ë§¡ê²¨ì£¼ì„¸ìš”</option>
                            <option value="ë³¸ì¸(ë¶€ì¬ì‹œë¬¸ì•)">ë³¸ì¸(ë¶€ì¬ì‹œë¬¸ì•)</option>
                            <option value="direct_input">ì§ì ‘ ì…ë ¥</option>
                        </select>
                        <label for="customDeliveryMessage" class="sr-only">ì§ì ‘ ì…ë ¥ ë°°ì†¡ ë©”ì‹œì§€</label>
                        <input type="text" id="customDeliveryMessage" placeholder="ë°°ì†¡ ë©”ì‹œì§€ë¥¼ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”." style="display: none; margin-top: 10px;">
                    </div>
                    <div class="form-group delivery-date-group">
                        <label>ë°°ì†¡ í¬ë§ ë‚ ì§œ (ìµœëŒ€ 7ì¼ ì´ë‚´)</label>
                        <div id="deliveryDateOptions" class="date-options-grid">
                        </div>
                        <input type="hidden" id="wantDeliveryDate" name="wantDeliveryDate" required>
                    </div>
                </section>
            </form>

            <section class="order-section discount-selection-section">
                <h2>ğŸ·ï¸ ì¿ í° ì„ íƒ</h2>
                <div class="form-group discount-field">
                    <label for="couponSelect">ì ìš© ê°€ëŠ¥í•œ ì¿ í°</label>
                    <select id="couponSelect" name="couponDiscountAmount">
                        <option value="0">ì¿ í° ë¯¸ì‚¬ìš©</option>
                        <option value="5000">ğŸ‰ ìƒì¼ ì¶•í•˜ ì¿ í° (5,000ì› í• ì¸)</option>
                        <option value="10000">ğŸ’° 10% í• ì¸ ì¿ í° (ìµœëŒ€ 10,000ì›)</option>
                    </select>
                </div>
            </section>

            <section class="order-section point-usage-section">
                <h2>ğŸ’¸ í¬ì¸íŠ¸ ì‚¬ìš©</h2>
                <div class="form-group discount-field">
                    <label for="pointDiscountAmount">ì‚¬ìš©í•  í¬ì¸íŠ¸</label>
                    <input type="number" id="pointDiscountAmount" name="pointDiscountAmount" value="0" min="0" step="100">
                    <span class="current-point">ë³´ìœ  í¬ì¸íŠ¸: <span id="currentPointValue">12,500 P</span></span>
                </div>
            </section>

            <section class="order-section payment-method-section">
                <h2>ğŸ’³ ê²°ì œ ìˆ˜ë‹¨</h2>
                <div class="payment-method-options">
                    <label><input type="radio" name="paymentMethod" value="CARD" checked> ì¹´ë“œ ê²°ì œ</label>
                    <label><input type="radio" name="paymentMethod" value="TRANSFER"> ê³„ì¢Œ ì´ì²´</label>
                    <label><input type="radio" name="paymentMethod" value="VIRTUAL_ACCOUNT"> ê°€ìƒ ê³„ì¢Œ</label>
                </div>
            </section>

        </div>

        <div class="payment-summary-area">
            <div class="order-section sticky-summary">
                <h2>ìµœì¢… ê²°ì œ ê¸ˆì•¡</h2>

                <div class="price-breakdown">
                    <div class="summary-line"><span>ì´ ìƒí’ˆ ê¸ˆì•¡</span> <span id="summaryTotalItemPrice" class="price">0ì›</span></div>
                    <div class="summary-line"><span>ë°°ì†¡ë¹„</span> <span id="deliveryFee" class="price fee">0ì›</span></div>
                    <div class="summary-line"><span>í¬ì¥ë¹„</span> <span id="wrappingFee" class="price fee">0ì›</span></div>
                    <div class="summary-line discount-row"><span>ì¿ í° í• ì¸</span> <span id="couponDiscount" class="price discount">-0ì›</span></div>
                    <div class="summary-line discount-row"><span>í¬ì¸íŠ¸ ì‚¬ìš©</span> <span id="pointDiscount" class="price discount">-0ì›</span></div>
                </div>

                <div class="final-total-row">
                    <span>ì´ ì£¼ë¬¸ ê¸ˆì•¡ (VAT í¬í•¨)</span>
                    <span id="finalPaymentAmount">0ì›</span>
                </div>

                <button type="button" id="requestTossPayment" class="btn-checkout-final">
                    <span id="finalPaymentButtonText">0ì› ê²°ì œí•˜ê¸°</span>
                </button>
            </div>
        </div>
    </main>
</div>

<div id="wrappingModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle"></h2>
        <div id="wrappingOptions" class="options-grid">
        </div>
        <div class="modal-actions" style="margin-top: 20px; text-align: right;">
            <button id="confirmWrapButton" class="btn btn-primary" disabled>ì„ íƒ ì™„ë£Œ</button>
        </div>
    </div>
</div>

</body>
<script src="checkout.js"></script>
</html>